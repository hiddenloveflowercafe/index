<!DOCTYPE html>
<html>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#FFF6F5" />
	<meta content="Hidden Love Flowers & Crafts + Cafe" property="twitter:title"/>
	<meta content="Hidden Love Flowers & Crafts + Cafe" property="og:title"/>
	<meta content="Hidden Love Flowers & Crafts + Cafe" name="title"/>
	<meta content="https://raw.githubusercontent.com/miniwebpage/isayskitchen/main/images/sharingbanner.png" property="twitter:image"/>
	<meta content="https://raw.githubusercontent.com/miniwebpage/isayskitchen/main/images/sharingbanner.png" property="og:image"/>
	<link rel='shortcut icon' type='image/x-icon' href='images/icons/favicon.svg' />
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Princess+Sofia&family=Quattrocento+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="css/general.css">
	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"> -->
	<!-- <script src="https://unpkg.com/scrollreveal@4"></script>
	<script src="https://smtpjs.com/v3/smtp.js"></script> -->
	<title>Hidden Love Flowers & Crafts + Cafe</title>
	<body>
		<h1>Product Reviews</h1>
		<div id="reviews"></div>
	
		<h2>Add a Review</h2>
		<input type="text" id="nickname" placeholder="Your Nickname">
		<br>
		<textarea id="reviewText" rows="4" cols="50" placeholder="Write your review here"></textarea>
		<br>
		<button id="submitReview">Submit Review</button>

	</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
	<script src="js/navigation.js"></script>
	<script src="js/slider.js"></script>
	<script src="js/fadeViewpoint.js"></script> -->
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			// Load existing reviews from local storage
			loadReviews();

			// Listen for the "Submit Review" button click
			document.getElementById("submitReview").addEventListener("click", function () {
				addReview();
			});
		});

		function addReview() {
			const nickname = document.getElementById("nickname").value;
			const reviewText = document.getElementById("reviewText").value;
			if (nickname.trim() === "" || reviewText.trim() === "") {
				alert("Please enter both a nickname and a review.");
				return;
			}

			const review = {
				nickname: nickname,
				text: reviewText,
				date: new Date().toISOString(),
			};

			// Get existing reviews from local storage
			const existingReviews = JSON.parse(localStorage.getItem("reviews")) || [];

			// Add the new review
			existingReviews.push(review);

			// Store the updated reviews in local storage
			localStorage.setItem("reviews", JSON.stringify(existingReviews));

			// Clear the nickname and review input fields
			document.getElementById("nickname").value = "";
			document.getElementById("reviewText").value = "";

			// Refresh the reviews on the page
			loadReviews();
		}

		function loadReviews() {
			// Get existing reviews from local storage
			const existingReviews = JSON.parse(localStorage.getItem("reviews")) || [];

			// Remove reviews older than 2 years
			const twoYearsAgo = new Date();
			twoYearsAgo.setFullYear(twoYearsAgo.getFullYear() - 2);
			const filteredReviews = existingReviews.filter(function (review) {
				return new Date(review.date) > twoYearsAgo;
			});

			// Store the filtered reviews back in local storage
			localStorage.setItem("reviews", JSON.stringify(filteredReviews));

			// Display the reviews on the page
			const reviewsContainer = document.getElementById("reviews");
			reviewsContainer.innerHTML = "";

			if (filteredReviews.length === 0) {
				reviewsContainer.innerHTML = "No reviews yet.";
			} else {
				filteredReviews.forEach(function (review) {
					const reviewElement = document.createElement("div");
					reviewElement.innerHTML = `<p><strong>Nickname:</strong> ${review.nickname}</p><p><strong>Review Date:</strong> ${review.date}</p><p>${review.text}</p>`;
					reviewsContainer.appendChild(reviewElement);
				});
			}
		}
	</script>
</html>